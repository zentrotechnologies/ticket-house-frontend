<div class="layout">
  <!-- CASE 1: ADMIN/ORGANIZER USERS (role_id 1 or 2) - Show sidebar + admin header -->
  <ng-container *ngIf="isAdminUser()">
    <app-sidebar (toggle)="onSidebarToggle($event)"></app-sidebar>
    <app-header [isSidebarCollapsed]="isSidebarCollapsed"></app-header>
    
    <main class="main-content" [class.sidebar-collapsed]="isSidebarCollapsed">
      <div class="content-wrapper">
        <router-outlet></router-outlet>
      </div>
    </main>
  </ng-container>

  <!-- CASE 2: EVERYONE ELSE - Audience users (role_id 3) AND Public users (not logged in) -->
  <!-- Show user header for ALL non-admin users (NO sidebar) -->
  <ng-container *ngIf="isAudienceOrPublic()">
    <div class="audience-page audience-body">
      <!-- Common User Header - ALWAYS visible for non-admin users -->
      <app-user-header></app-user-header>
      
      <!-- Main content WITHOUT any header (header removed from individual components) -->
      <main class="audience-main-content">
        <div class="content-wrapper">
          <router-outlet></router-outlet>
        </div>
      </main>
    </div>
  </ng-container>
</div>